/*!CK:2838067746!*//*1460391848,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["aknff"]); }

__d('ControlledReferer',['URI','UserAgent','lowerFacebookDomain'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={useFacebookReferer:function(i,j,k){var l=false;function m(){if(l)return;var o=i.contentWindow.location.pathname;if(o!=='/intern/common/referer_frame.php'&&o!=='/common/referer_frame.php')return;l=true;i.contentWindow.document.body.style.margin=0;j();}var n;if(!c('lowerFacebookDomain').isValidDocumentDomain()){n='/intern/common/referer_frame.php';}else if(c('UserAgent').isBrowser('Opera')){n='/common/referer_frame.php';}else if(new (c('URI'))(window.location.href).isSecure()){n='https://staticxx.facebook.com/common/referer_frame.php';}else n='http://staticxx.facebook.com/common/referer_frame.php';if(k)n+='?fb_source='+k;i.onload=m;i.src=n;},useFacebookRefererHtml:function(i,j,k){h.useFacebookReferer(i,function(){i.contentWindow.document.body.innerHTML=j;},k);}};f.exports=h;},null);
__d('TrackingPixel',['Arbiter','ControlledReferer','NonBlockingIFrame','WebSpeedExperiments'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={_iframe:undefined,loadWithNoReferrer:function(i){if(!h._iframe)if(c('WebSpeedExperiments').non_blocking_logger){h._iframe=true;c('NonBlockingIFrame').loadIFrame().then(function(k){h._iframe=k;c('ControlledReferer').useFacebookReferer(k,function(){c('Arbiter').inform('TrackingPixel/iframeIsLoaded',null,c('Arbiter').BEHAVIOR_PERSISTENT);},null);}).done();}else{var j=document.createElement('iframe');j.frameborder=0;j.width=j.height=1;j.style.position='absolute';j.style.top='-10px';c('ControlledReferer').useFacebookReferer(j,function(){c('Arbiter').inform('TrackingPixel/iframeIsLoaded',null,c('Arbiter').BEHAVIOR_PERSISTENT);},null);document.body.appendChild(j);h._iframe=j;}c('Arbiter').subscribe('TrackingPixel/iframeIsLoaded',function(){var k=h._iframe.contentWindow,l=new k.Image();l.src=i;});}};f.exports=h;},null);
__d('ExternalTrackingTag',['AsyncSignal','TrackingPixel','Event'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={listenForElementClick:function(i,j,k,l,m){c('Event').listen(i,'click',function(){h.sendRequest(j,k,l,m);});},sendRequest:function(i,j,k,l){if(!i)return;new (c('AsyncSignal'))('/ads/external_tracking_tag/',{href:i,tracking_tag_id:j,adgroup_id:k,ad_id:l}).send();c('TrackingPixel').loadWithNoReferrer(i);}};f.exports=h;},null);
__d('FeedAdsClickLogger',['Arbiter','AsyncRequest','Banzai','BanzaiODS','collectDataAttributes','DOM','ge','LitestandMessages','LitestandStream','Parent','TrackingNodes','ExternalTrackingTag','URI','isFacebookURI'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='ssinfeed',i={},j=false,k=[];function l(){'use strict';}l.prototype.init=function(m){'use strict';c('Arbiter').subscribe("ClickRefAction/new",this.onNewUserAction.bind(this));if(m.append_tracking_data_to_links){this.appendTrackingDataToLinks();c('Arbiter').subscribe(c('LitestandMessages').STORIES_INSERTED,this.appendTrackingDataToLinks.bind(this));c('Arbiter').subscribe('FeedAdsClickLogger/refreshTrackingData',this.appendTrackingDataToLinks.bind(this),c('Arbiter').SUBSCRIBE_NEW);}};l.prototype.getStories=function(){'use strict';var m=c('LitestandStream').getStreamRoot();if(m){return c('DOM').scry(m,c('LitestandStream').getStoriesSelector());}else{var n=c('ge')('home_stream');if(n)return c('DOM').scry(n,'.uiStreamStory');}return [];};l.prototype.appendTrackingDataToLinks=function(){'use strict';var m=this.getStories();for(var n=0;n<m.length;n++){var o=m[n];if(o in k)continue;var p=o.getAttribute('data-ft');if(!p||p.indexOf('ei')===-1&&p.indexOf('mei')===-1)continue;var q=c('DOM').scry(o,'a');for(var r=0;r<q.length;r++){var s=q[r];if(s.getAttribute('ajaxify')!=null)continue;if(s.getAttribute('rel')!=null)continue;var t=s.getAttribute('href');if(!t||t.charAt(0)==='#')continue;var u=new (c('URI'))(s);if(c('isFacebookURI')(u)===false)continue;if(u.isLinkshimURI()===true)continue;var v=c('collectDataAttributes')(s,['ft']).ft,w=u.getQueryData();w.ft=v;w.__md__=0;u.setQueryData(w);s.setAttribute('href',u.toString());s.setAttribute('onmousedown',"this.href = this.href.replace('__md__=0', '__md__=1');");}k.push(o);}};l.prototype.getHref=function(m){'use strict';return (m.getAttribute&&(m.getAttribute('ajaxify')||m.getAttribute('data-endpoint'))||m.action||m.href);};l.prototype.sendLogRequest=function(m,n){'use strict';var o=m.ei||m.ai;if(!o&&m.mei)o=m.mf_story_key;if(m!==null&&typeof o==="string"){var p=false;if(m.tn){var q=c('TrackingNodes').parseTrackingNodeString(m.tn);for(var r=0;r<q.length;r++){var s=q[r][0];switch(s){case c('TrackingNodes').types.LIKE_LINK:case c('TrackingNodes').types.UNLIKE_LINK:case c('TrackingNodes').types.COMMENT:case c('TrackingNodes').types.COMMENT_LINK:case c('TrackingNodes').types.ADD_COMMENT_BOX:case c('TrackingNodes').types.MULTI_ATTACHMENT_VIDEO:return;case c('TrackingNodes').types.XBUTTON:case c('TrackingNodes').types.HIDE_LINK:case c('TrackingNodes').types.REPORT_SPAM_LINK:case c('TrackingNodes').types.HIDE_ALL_LINK:case c('TrackingNodes').types.DROPDOWN_BUTTON:case c('TrackingNodes').types.UNHIDE_LINK:return;case c('TrackingNodes').types.RELATED_SHARE_ARTICLE:case c('TrackingNodes').types.RELATED_SHARE_VIDEO:return;case c('TrackingNodes').types.ATTACHMENT:case c('TrackingNodes').types.USER_MESSAGE:p=true;break;}}}var t=Date.now(),u=500;m.duplicate_click=!!i[o]&&t-i[o]<u;i[o]=t;if(c('Banzai').isEnabled('ssinfeed')){c('Banzai').post(h,m,{delay:0,retry:c('Banzai').isEnabled('ssinfeed_retry')});}else{var v=new (c('AsyncRequest'))('/ajax/ssinfeed/end/').setData(m).setAllowCrossPageTransition(true).setMethod('POST');v.send();}var w=m.href;if(new (c('URI'))(w).isLinkshimURI()&&new (c('URI'))(w).getQueryData())w=new (c('URI'))(w).getQueryData().u;if(p&&!m.duplicate_click&&n!==null&&n.url&&w&&c('isFacebookURI')(new (c('URI'))(w))===false){c('ExternalTrackingTag').sendRequest(n.url,n.tag_id,n.adgroup_id);c('BanzaiODS').bumpEntityKey('external_tracking_tags','request_sent');}}};l.prototype.onNewUserAction=function(m,n){'use strict';if(!n.node)return;var o=this.getHref(n.node),p=c('Parent').byTag(n.node,'input')||c('Parent').byTag(n.node,'button');if(!o&&p&&p.type=="submit"&&p.getAttribute&&p.getAttribute('data-ft'))o="#";var q,r;if(o&&n.event&&(n.event.type==='click'||n.event.type==='contextmenu')){q=c('collectDataAttributes')(n.node,['ft']);q.ft.href=o;q.ft.mouse_type=n.event.type;r=c('collectDataAttributes')(n.node,['external-tracking-tags']);this.sendLogRequest(q.ft,r['external-tracking-tags']);}};f.exports.init=function(m){if(j===false){new l().init(m);j=true;}};},null);
/**
 * @generated SignedSource<<623c7cbcff19956af736c3d064fc689d>>
 *
 * !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 * !! This file is a check-in of a static_upstream project!      !!
 * !!                                                            !!
 * !! You should not modify this file directly. Instead:         !!
 * !! 1) Use `fjs use-upstream` to temporarily replace this with !!
 * !!    the latest version from upstream.                       !!
 * !! 2) Make your changes, test them, etc.                      !!
 * !! 3) Use `fjs push-upstream` to copy your changes back to    !!
 * !!    static_upstream.                                        !!
 * !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 *
 * Copyright (C) 2010 by Johannes Baagoe <baagoe@baagoe.org>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @providesModule Alea
 * @preserve-header
 */__d('Alea',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){var j=4022871197,k=function(l){l=l.toString();for(var m=0;m<l.length;m++){j+=l.charCodeAt(m);var o=.02519603282416938*j;j=o>>>0;o-=j;o*=j;j=o>>>0;o-=j;j+=o*4294967296;}return (j>>>0)*2.3283064365386963e-10;};k.version='Mash 0.9';return k;}function i(){return function(j){var k=0,l=0,m=0,n=1;if(j.length===0)j=[new Date()];var o=new h();k=o(' ');l=o(' ');m=o(' ');for(var p=0;p<j.length;p++){k-=o(j[p]);if(k<0)k+=1;l-=o(j[p]);if(l<0)l+=1;m-=o(j[p]);if(m<0)m+=1;}o=null;var q=function(){var r=2091639*k+n*2.3283064365386963e-10;k=l;l=m;m=r-(n=r|0);return m;};q.version='Alea 0.9';q.args=j;return q;}(Array.prototype.slice.call(arguments));}f.exports=i;},null);
__d('Random',['ServerNonce','Alea'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=4294967296,i=c('ServerNonce').ServerNonce,j=c('Alea')(i),k={random:function(){if(typeof window!=='undefined'&&typeof Uint32Array!=='undefined'){var l=new Uint32Array(1);if(window.crypto&&window.crypto.getRandomValues){return window.crypto.getRandomValues(l)[0]/h;}else if(window.msCrypto&&window.msCrypto.getRandomValues)return window.msCrypto.getRandomValues(l)[0]/h;}return j();},uint32:function(){return Math.floor(this.random()*h);}};f.exports=k;},null);
__d('UFIOrderingModeSelector.react',['cx','ix','BanzaiLogger','InlineBlock.react','Link.react','React','Image.react','Random','ReactXUIMenu','PopoverMenu.react','UFIConfig'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('ReactXUIMenu').SelectableMenu,l=c('ReactXUIMenu').SelectableItem,m=c('React').createClass({displayName:'UFIOrderingModeSelector',propTypes:{onOrderChanged:j.func,feedback:j.shape({orderingmodes:j.array.isRequired,commentstargetfbid:j.string.isRequired,ownerid:j.string.isRequired}).isRequired},getInitialState:function(){var n=null;this.props.feedback.orderingmodes.map(function(o){if(o.selected)n=o;});return {selectedMode:n};},onMenuItemClick:function(n,o){var p=o.item.getValue();if(this.props.feedback.orderingmodes&&c('UFIConfig').logChangeOrderingModeUsageSampleRate>c('Random').random())c('BanzaiLogger').log('CommentsOrderingModeSelectorUsageLoggerConfig',{start_order:this.state.selectedMode.value,end_order:p,post_fbid:this.props.feedback.commentstargetfbid,post_owner_fbid:this.props.feedback.ownerid,available_orders:this.props.feedback.orderingmodes.map(function(q){return q.value;})});this.props.feedback.orderingmodes.map(function(q){if(q.value===p)this.setState({selectedMode:q});}.bind(this));this.props.onOrderChanged(p);},render:function(){var n=c('React').createElement(k,{className:"_4tju",onItemClick:this.onMenuItemClick},this.props.feedback.orderingmodes.map(function(o){return (c('React').createElement(l,{key:o.value,value:o.value,label:o.name,selected:o.value===this.state.selectedMode.value},c('React').createElement('div',{className:"_3scm"},c('React').createElement('div',{className:"_3scn"},o.name),c('React').createElement('div',{className:"_3sco"},o.description))));}.bind(this)));return (c('React').createElement('div',{className:"_3scp"},c('React').createElement(c('InlineBlock.react'),null,c('React').createElement(c('PopoverMenu.react'),{className:"_3scs",menu:n,alignh:'right'},c('React').createElement(c('Link.react'),null,this.state.selectedMode.name,c('React').createElement(c('Image.react'),{className:"_3sct",src:i('/images/ui/xhp/link/more/down_caret.gif')}))))));}});f.exports=m;},null);